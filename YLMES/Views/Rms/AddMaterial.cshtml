<!--_meta 作为公共模版分离出去-->
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="~/static/h-ui/css/H-ui.min.css" />
    <link rel="stylesheet" type="text/css" href="~/static/h-ui.admin/css/H-ui.admin.css" />
    <link rel="stylesheet" type="text/css" href="~/lib/Hui-iconfont/1.0.8/iconfont.css" />
    <link rel="stylesheet" type="text/css" href="~/static/h-ui.admin/skin/default/skin.css" id="skin" />
    <link rel="stylesheet" type="text/css" href="~/static/h-ui.admin/css/style.css" />
    <script src="~/Scripts/jquery.form.js" type="text/javascript"></script>
    <title></title>
</head>
<body>
    <article class="page-container">
        <form class="form form-horizontal" id="form-article-add">
            <div class="row cl">
                <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>大类别：</label>
                <div class="formControls col-xs-8 col-sm-9">

                    @Html.DropDownList("Category1", new SelectList(ViewBag.c1, "id", "CategoryName"), "请选择", new { @class = "Da", @ID = "Da", @name = "Da" })

                </div>
            </div>
            <div class="row cl">
                <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>小类别：</label>
                <div class="formControls col-xs-8 col-sm-9">

                    @Html.DropDownList("Category2", new SelectList(ViewBag.c2, "id", "CategoryName"), "请选择", new { @class = "Xiao", @ID = "Xiao", @name = "Xiao" })

                </div>
            </div>
            <div class="row cl">
                <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>图号：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <input type="text" class="input-text" value="@ViewData["figureNumber"]" placeholder="" id="figureNumber" name="figureNumber">
                </div>
            </div>
            <div class="row cl">
                <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>物料名称：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <input type="text" class="input-text" value="@ViewData["PartNumber"]" placeholder="" id="PartNumber" name="PartNumber">
                </div>
            </div>
            <div class="row cl">
                <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>规格：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <input type="text" class="input-text" value="@ViewData["PartSpec"]" placeholder="" id="PartSpec" name="PartSpec">
                </div>
            </div>
            <div class="row cl">
                <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>材料：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <input type="text" class="input-text" value="@ViewData["PartMaterial"]" placeholder="" id="PartMaterial" name="PartMaterial">
                </div>
            </div>
            <div class="row cl">
                <label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>物料类型:</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box">
                        <select name="select" class="select">
                            <option value="外购件">外购件</option>
                            <option value="装配体">装配体</option>
                            <option value="焊接件">焊接件</option>
                        </select>
                    </span>
                </div>
            </div>
            <div class="row cl">
                <div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-2">
                    <button class="btn btn-primary radius" type="submit"><i class="Hui-iconfont">&#xe632;</i>确定</button>
                </div>
            </div>
        </form>
    </article>

    <!--_footer 作为公共模版分离出去-->
    <script type="text/javascript" src="~/lib/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="~/lib/layer/2.4/layer.js"></script>
    <script type="text/javascript" src="~/static/h-ui/js/H-ui.min.js"></script>
    <script type="text/javascript" src="~/static/h-ui.admin/js/H-ui.admin.js"></script> <!--/_footer /作为公共模版分离出去-->
    <!--请在下方写此页面业务相关的脚本-->
    <script type="text/javascript" src="~/lib/My97DatePicker/4.8/WdatePicker.js"></script>
    <script type="text/javascript" src="~/lib/jquery.validation/1.14.0/jquery.validate.js"></script>
    <script type="text/javascript" src="~/lib/jquery.validation/1.14.0/validate-methods.js"></script>
    <script type="text/javascript" src="~/lib/jquery.validation/1.14.0/messages_zh.js"></script>
    <script type="text/javascript" src="~/lib/webuploader/0.1.5/webuploader.min.js"></script>
    <script type="text/javascript" src="~/lib/ueditor/1.4.3/ueditor.config.js"></script>
    <script type="text/javascript" src="~/lib/ueditor/1.4.3/ueditor.all.min.js"> </script>
    <script type="text/javascript" src="~/lib/ueditor/1.4.3/lang/zh-cn/zh-cn.js"></script>
    <script type="text/javascript">
        $.ready(
           document.getElementById('Da').value = '@ViewData["cc"]',
           document.getElementById('Xiao').value = '@ViewData["ccc"]'
           );

        $(function () {
            $('.skin-minimal input').iCheck({
                checkboxClass: 'icheckbox-blue',
                radioClass: 'iradio-blue',
                increaseArea: '20%'
            });
            $("#cancled").click(function () {
                var sd = $("#u").text();
                window.parent.document.getElementById("rightframe").src = sd;
            });
            //表单验证
            $("#form-article-add").validate({
                rules: {
                    PartNumber: {
                        required: true,
                    },
                    PartSpec: {
                        required: true,
                    },
                    author: {
                        required: true,
                    },
                    sources: {
                        required: true,
                    },
                    allowcomments: {
                        required: true,
                    },
                    commentdatemin: {
                        required: true,
                    },
                    commentdatemax: {
                        required: true,
                    },

                },
                onkeyup: false,
                focusCleanup: true,
                success: "valid",
                submitHandler: function (form) {
                    var Da = $("#Da").val();
                    var Xiao = $("#Xiao").val();
                    var figureNumber = $("#figureNumber").val();
                    var PartNumber = $("#PartNumber").val();
                    var PartSpec = $("#PartSpec").val();
                    var PartMaterial = $("#PartMaterial").val();
                    var ListType = $(".select").val();
                    $.ajax({
                        url: "/Rms/AddJsonMaterial",
                        data: { c1: Da, c2: Xiao, fn: figureNumber, pn: PartNumber, ps: PartSpec, pm: PartMaterial, listType: ListType },
                        type: "post",
                        dataType: "text",
                        success: function (data) {
                            if (data == "true") {
                                window.setTimeout(function () {
                                    layer.msg("新增成功！");                                                                         
                                    window.parent.document.getElementById("rightframe").src = "/Rms/MaterialRegistration";                                   
                                }, 500);
                            }
                            if (data == "two") {
                               layer.msg('有重复了不能新增!')
                            }
                        }
                    });

                }
            });
            $list = $("#fileList"),
            $btn = $("#btn-star"),
            state = "pending",
            uploader;


        });
    </script>
    <!--/请在上方写此页面业务相关的脚本-->
</body>
</html>